{"version":3,"sources":["webpack:///./src/components/found/organize/uploadImg.vue?5e06","webpack:///./src/components/found/publish/publish.vue","webpack:///src/components/found/publish/publish.vue","webpack:///src/components/found/organize/uploadImg.vue","webpack:///./src/components/found/publish/publish.vue?3bbd","webpack:///./src/components/found/organize/uploadImg.vue","webpack:///./src/common/images/loading.gif"],"names":["esExports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","imgList","length","isLoading","_e","key","index","attrs","src","alt","_v","type","nativeOn","click","$event","handleRemove","__webpack_require__","name","multiple","accept","on","change","uploadChange","staticStyle","width","height","line-height","size","staticRenderFns","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_2_vue_loader_lib_template_compiler_index_id_data_v_2c6bc956_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_template_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_publish_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_script_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_publish_vue___default","a","_isLogin","_vuex","_qs","data","isClose","title","textVal","len","watch","computed","_extends3","default","mapGetters","created","getLogin","beforeRouteEnter","to","form","next","vm","console","log","isLogin","$router","push","path","encodeURIComponent","window","location","href","mounted","setTimeout","methods","back","publish","_this","uploadList","layer","msg","obj","goods_id","detailsList","content","img","$axios","post","stringify","then","res","status","code","message","replace","emptyUploadList","emptyImgList","emptyDeleteList","calculate","deleteItems","deleteList","addGoods","setImgList","mapMutations","getUploadList","setLoginCode","setLoginUrl","components","UploadImg","_uploadImg2","ComGraEnt","_comGraEnt2","props","Array","Object","itemList","imgNum","sizeM","maxSize","isUp","e","formData","FormData","files","target","uploadImgNum","_loop","i","file","reader","FileReader","onload","$set","result","$emit","readAsDataURL","append","uploadImg","_this2","url","directives","rawName","value","expression","action","modifiers","trim","placeholder","maxlength","domProps","keyup","input","composing","blur","$forceUpdate","_s","stopPropagation","dataList","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_2_vue_loader_lib_template_compiler_index_id_data_v_7b3551d6_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_template_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_uploadImg_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_script_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_uploadImg_vue___default","module","exports"],"mappings":"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","file":"static/js/6.f6dd25672b503a3fd4e5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"uploadImg\"},[_vm._l((_vm.imgList),function(item){return (_vm.imgList.length !== 0 && !_vm.isLoading)?_c('div',{key:item.index,staticClass:\"demo-upload-list\"},[_c('span',[_c('img',{attrs:{\"src\":item.src,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"demo-upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]):_vm._e()}),_vm._v(\" \"),(_vm.isLoading)?_c('div',{staticClass:\"demo-upload-img\"},[_c('img',{attrs:{\"src\":require(\"../../../common/images/loading.gif\"),\"alt\":\"\"}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"uploadFle\"},[_c('input',{staticClass:\"upload__input\",attrs:{\"type\":\"file\",\"name\":\"imageFiles[]\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.uploadChange($event)}}}),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"md-reverse-camera\",\"size\":\"28\"}})],1)])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-7b3551d6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./node_modules/_iview-loader@1.2.1@iview-loader??ref--0-1!./src/components/found/organize/uploadImg.vue\n// module id = 1tSq\n// module chunks = 6","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c6bc956\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./publish.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./publish.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./publish.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c6bc956\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./publish.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2c6bc956\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/found/publish/publish.vue\n// module id = LC7b\n// module chunks = 6","<template>\r\n  <div class=\"publish\" v-title=\"title\">\r\n    <form action=\"\" class=\"group-form\">\r\n      <div class=\"group-text\">\r\n        <textarea placeholder=\"分享购物晒单与使用心得...\" maxlength=\"500\" @keyup=\"calculate\" v-model.trim=\"textVal\"></textarea>\r\n      </div>\r\n      <div class=\"cal_num\">\r\n        <p><span>{{len}}/500</span></p>\r\n      </div>\r\n    </form>\r\n    <upload-img\r\n      :imgList=\"imgList\"\r\n      :uploadList=\"uploadList\"\r\n      @setImgList=\"setImgList\"\r\n    ></upload-img>\r\n    <div class=\"hr\"></div>\r\n    <div class=\"AddMerchandise\">\r\n      <div class=\"title\" @click.stop=\"addGoods\">\r\n        <span>添加商品</span>\r\n        <Icon type=\"ios-arrow-forward\" />\r\n      </div>\r\n      <div class=\"contents\">\r\n        <com-gra-ent\r\n          :isClose=\"isClose\"\r\n          :dataList=\"detailsList\"\r\n          @deleteItems=\"deleteItems\"\r\n        ></com-gra-ent>\r\n      </div>\r\n    </div>\r\n    <div class=\"dexter\" @click=\"publish\">发 布</div>\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import UploadImg from 'components/found/organize/uploadImg'\r\n  import ComGraEnt from 'components/found/organize/comGraEnt'\r\n  import {getLogin} from \"common/js/isLogin\";\r\n  import {mapGetters, mapMutations} from 'vuex'\r\n\r\n  const _qs = require('qs');\r\n\r\n  export default {\r\n    name: \"publish\",\r\n    data() {\r\n      return {\r\n        isClose: true,\r\n        title: '发布动态',\r\n        textVal: '',\r\n        len: 0\r\n      }\r\n    },\r\n    watch:{\r\n      textVal() {\r\n        this.len = this.textVal.length\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters([\r\n        'detailsList',\r\n        'imgList',\r\n        'uploadList',\r\n        'isLogin',\r\n        'loginUrl'\r\n      ])\r\n    },\r\n    created() {\r\n      getLogin(this);\r\n    },\r\n    beforeRouteEnter(to, form, next) {\r\n      next(vm => {\r\n        console.log(vm.isLogin)\r\n        if (vm.isLogin == 1000) {\r\n          vm.$router.push({\r\n            path: '/login?callBack=' + encodeURIComponent(window.location.href)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    mounted() {\r\n      setTimeout(() => {\r\n      }, 20)\r\n    },\r\n    methods: {\r\n      back() {\r\n        this.$router.back();\r\n      },\r\n      publish() {\r\n        if (this.textVal == '') {\r\n          layer.msg('发布内容不能为空')\r\n          return\r\n        }\r\n        if (this.uploadList.length == 0) {\r\n          layer.msg('请添加图片')\r\n          return\r\n        }\r\n        if (this.uploadList.length > 9) {\r\n          layer.msg('图片最多上传9张')\r\n          return\r\n        }\r\n        // uploadList\r\n        let obj = {\r\n          \"goods_id\": this.detailsList.length == 0 ? 0 : this.detailsList[0].goods_id,\r\n          \"content\": this.textVal,\r\n          \"img\": this.uploadList\r\n        }\r\n        this.$axios.post('/social/self/publish', _qs.stringify(obj))\r\n          .then(res => {\r\n            console.log(res)\r\n            if (res.status == 200) {\r\n              if (res.data.code == 2000) {\r\n                layer.msg(res.data.message)\r\n                this.$router.replace({\r\n                  path: '/FoundPage/recommend'\r\n                })\r\n                this.emptyUploadList()\r\n                this.emptyImgList()\r\n                this.emptyDeleteList()\r\n              }\r\n              else {\r\n                layer.msg(res.data.message)\r\n              }\r\n            }\r\n          })\r\n\r\n        this.textVal = ''\r\n        this.calculate()\r\n      },\r\n      calculate() {\r\n        this.textVal = this.textVal.replace(/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g,'');\r\n        this.len = this.textVal.length\r\n      },\r\n      deleteItems(index) {\r\n        this.deleteList(index)\r\n      },\r\n      addGoods() {\r\n        this.$router.push({\r\n          path: '/selectGoods'\r\n        })\r\n      },\r\n      setImgList(item) {\r\n        this.setImgList(item)\r\n      },\r\n      ...mapMutations({\r\n        deleteList: 'SET_DELETE_LIST',\r\n        setImgList: 'SET_IMG_LIST',\r\n        getUploadList: 'SET_UPLOAD_LIST',\r\n        emptyImgList: 'SET_EMPTY_IMG_LIST',\r\n        emptyUploadList: 'SET_EMPTY_UPLOAD_LIST',\r\n        emptyDeleteList: 'SET_EMPTY_DELETE_LIST',\r\n        setLoginCode: 'SET_IS_LOGIN',\r\n        setLoginUrl: 'SET_LOGIN_URL'\r\n      })\r\n    },\r\n    components: {\r\n      UploadImg,\r\n      ComGraEnt\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\" rel=\"stylesheet/less\">\r\n  .publish{\r\n    padding-bottom: 44px;\r\n  }\r\n  .group-form {\r\n    width: 100%;\r\n    .group-text {\r\n      width: 100%;\r\n      display: block;\r\n      textarea {\r\n        width: 100%;\r\n        min-height: 180px;\r\n        border: none;\r\n        padding: 5px;\r\n        font-size: 14px;\r\n        outline: none;\r\n      }\r\n    }\r\n    .cal_num {\r\n      padding: 0 10px;\r\n      text-align: right;\r\n      p {\r\n        display: block;\r\n        padding: 10px 0;\r\n        border-bottom: 1px solid #f5f5f5;\r\n        color: #ababab;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .hr {\r\n    height: 10px;\r\n    background-color: #f5f5f5;\r\n  }\r\n  .dexter {\r\n    position: fixed;\r\n    margin-top: 30px;\r\n    width: 100%;\r\n    height: 44px;\r\n    line-height: 44px;\r\n    text-align: center;\r\n    left: 0;\r\n    bottom: 0;\r\n    z-index: 1;\r\n    font-size: 15px;\r\n    cursor: pointer;\r\n    background-color: #b462ff;\r\n    color: white;\r\n  }\r\n  .AddMerchandise {\r\n    width: 100%;\r\n    margin-bottom: 15px;\r\n    .title {\r\n      padding: 0 15px;\r\n      height: 44px;\r\n      line-height: 44px;\r\n      overflow: hidden;\r\n      font-size: 15px;\r\n      text-align: right;\r\n      cursor: pointer;\r\n      span {\r\n        float: left;\r\n        display: block;\r\n      }\r\n    }\r\n    .contents {\r\n      width: 100%;\r\n      padding: 0 10px;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/found/publish/publish.vue","<template>\r\n  <div class=\"uploadImg\">\r\n    <div class=\"demo-upload-list\" v-if=\"imgList.length !== 0 && !isLoading\"  v-for=\"item in imgList\" :key=\"item.index\">\r\n      <span><img :src=\"item.src\" alt=\"\"></span>\r\n      <div class=\"demo-upload-list-cover\">\r\n        <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n      </div>\r\n    </div>\r\n    <div class=\"demo-upload-img\" v-if=\"isLoading\">\r\n      <img src=\"../../../common/images/loading.gif\" alt=\"\">\r\n    </div>\r\n    <div class=\"uploadFle\">\r\n      <input type=\"file\" name=\"imageFiles[]\" multiple class=\"upload__input\" @change=\"uploadChange($event)\"\r\n             accept=\"image/*\">\r\n      <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n        <Icon type=\"md-reverse-camera\" size=\"28\"/>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import { mapMutations} from 'vuex'\r\n\r\n  export default {\r\n    name: \"uploadImg\",\r\n    props: {\r\n      imgList: {\r\n        type: [Array, Object],\r\n        default: []\r\n      },\r\n      uploadList:{\r\n        type: [Array, Object],\r\n        default: []\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        index: 0,\r\n        itemList: [],\r\n        imgNum: 9, //上传的照片数量，可根据实际情况自定义\r\n        sizeM: 1024 * 1024, // 1M\r\n        maxSize: 2, // 最大2M\r\n        isLoading: false,\r\n        isUp: true\r\n      }\r\n    },\r\n    methods: {\r\n      //根据点击上传按钮触发input\r\n      uploadChange(e) {\r\n        this.isLoading = true\r\n        let formData = new FormData();\r\n        let files = e.target.files;\r\n        this.uploadImgNum(this.uploadList.length)\r\n        this.uploadImgNum(files.length)\r\n        for (let i = 0; i < files.length; i++) {\r\n          let item = {\r\n            key: this.index++,\r\n            name: files[i].name,\r\n            size: files[i].size,\r\n            file: files[i]\r\n          };\r\n          let reader = new FileReader()\r\n          reader.onload = (e) => {\r\n            this.$set(item, 'src', e.target.result)\r\n            this.itemList = item\r\n            this.$emit('setImgList', this.itemList)\r\n          };\r\n          reader.readAsDataURL(files[i])\r\n          formData.append('imageFiles[]', files[i]);\r\n          formData.append('type', 'test');\r\n        }\r\n        if (this.isUp) {\r\n          this.uploadImg(formData)\r\n        }\r\n      },\r\n      uploadImg(formData) {\r\n        let obj = {};\r\n        this.$axios.post('/social/self/upload-img', formData)\r\n          .then((res) => {\r\n              if (res.data.code === 2000) {\r\n                obj = res.data.data.url\r\n                this.getUploadList(obj)\r\n                this.isLoading = false\r\n              }\r\n          })\r\n      },\r\n      uploadImgNum(imgNum) {\r\n        if (imgNum > this.imgNum) {\r\n          layer.msg('图片最多可上传9张');\r\n          this.isLoading = false\r\n          this.isUp = false\r\n          return false\r\n        }\r\n      },\r\n      ...mapMutations({\r\n        getUploadList: 'SET_UPLOAD_LIST'\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\" rel=\"stylesheet/less\">\r\n  .uploadImg {\r\n    display: block;\r\n    padding: 10px;\r\n  }\r\n\r\n  .uploadFle {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px dashed #b462ff;\r\n    overflow: hidden;\r\n    position: relative;\r\n    border-radius: 4px;\r\n    vertical-align: top;\r\n    .upload__input {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 100%;\r\n      top: 0;\r\n      left: 0;\r\n      opacity: 0;\r\n    }\r\n    .ivu-icon{\r\n      display: block;\r\n      line-height: 58px;\r\n      text-align: center;\r\n      float: none;\r\n    }\r\n  }\r\n\r\n  .demo-upload-list {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px solid transparent;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    position: relative;\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\r\n    margin-right: 4px;\r\n    vertical-align: top;\r\n  }\r\n  .demo-upload-img{\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px solid transparent;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    position: relative;\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\r\n    margin-right: 4px;\r\n    vertical-align: top;\r\n    img{\r\n      display: block;\r\n      margin: 15px auto;\r\n      width: 30px;\r\n      height: 30px;\r\n    }\r\n  }\r\n\r\n  .demo-upload-list img {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .demo-upload-list-cover {\r\n    display: none;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, .6);\r\n  }\r\n\r\n  .demo-upload-list:hover .demo-upload-list-cover {\r\n    display: block;\r\n  }\r\n\r\n  .demo-upload-list-cover i {\r\n    color: #fff;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    margin: 0 2px;\r\n  }\r\n\r\n  .ivu-icon {\r\n    line-height: 58px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/found/organize/uploadImg.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"title\",rawName:\"v-title\",value:(_vm.title),expression:\"title\"}],staticClass:\"publish\"},[_c('form',{staticClass:\"group-form\",attrs:{\"action\":\"\"}},[_c('div',{staticClass:\"group-text\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.textVal),expression:\"textVal\",modifiers:{\"trim\":true}}],attrs:{\"placeholder\":\"分享购物晒单与使用心得...\",\"maxlength\":\"500\"},domProps:{\"value\":(_vm.textVal)},on:{\"keyup\":_vm.calculate,\"input\":function($event){if($event.target.composing){ return; }_vm.textVal=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"cal_num\"},[_c('p',[_c('span',[_vm._v(_vm._s(_vm.len)+\"/500\")])])])]),_vm._v(\" \"),_c('upload-img',{attrs:{\"imgList\":_vm.imgList,\"uploadList\":_vm.uploadList},on:{\"setImgList\":_vm.setImgList}}),_vm._v(\" \"),_c('div',{staticClass:\"hr\"}),_vm._v(\" \"),_c('div',{staticClass:\"AddMerchandise\"},[_c('div',{staticClass:\"title\",on:{\"click\":function($event){$event.stopPropagation();return _vm.addGoods($event)}}},[_c('span',[_vm._v(\"添加商品\")]),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-arrow-forward\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"contents\"},[_c('com-gra-ent',{attrs:{\"isClose\":_vm.isClose,\"dataList\":_vm.detailsList},on:{\"deleteItems\":_vm.deleteItems}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"dexter\",on:{\"click\":_vm.publish}},[_vm._v(\"发 布\")]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2c6bc956\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./node_modules/_iview-loader@1.2.1@iview-loader??ref--0-1!./src/components/found/publish/publish.vue\n// module id = rj4U\n// module chunks = 6","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7b3551d6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./uploadImg.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./uploadImg.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./uploadImg.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7b3551d6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!../../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./uploadImg.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7b3551d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/found/organize/uploadImg.vue\n// module id = uqCI\n// module chunks = 6","module.exports = \"data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAAANACwAAAAAEAAQAAAEPbDJSau9OOvNew0AEHDA8wCkiW6g6AXHMU4LgizUYRgEZdsUggFAQCgUP+AERggcFYHaDaMgEBQchBNhiQAAIfkECQAADQAsAAAAABAAEAAABDuwyUmrvTYAEDAFzwN4EyiSksaRyHF06GEYBNoQ82EHBwHbCIUCYRMKiwSCYoFALDCIwLDZBFJtTKclAgAh+QQJAAANACwAAAAAEAAQAAAEPrDJGQAIM2vwHtAUcVTdBzaHYRCKip2EepxacBAvjSgKQmc83m+iILCGEkSgh5wsEIhFEwqdUpvPaHPLnUQAACH5BAkAAA0ALAAAAAAQABAAAAQ+sMkZyAkz62MM0ROiKAjRXQCATeOIHEQAPA+QKQShZHOdIQFSRqaSLBCIBQiERC41TcQzc0xOr9isdsvtPiMAIfkECQAADQAsAAAAABAAEAAABD2wyYmUQjNra/VcCLIoBKEExBFkYRtcBGAQbJsdhnFkoMimGI8wAACshBnA4wFAJpdNp4RolFqv2Kx2q4kAACH5BAkAAA0ALAAAAAAQABAAAAQ9sMm5EFoza2u1b5ylKMjXVFdAjGamrEo7IWMpz8QR3A0BGATewWA48BA5mykAAOxugMcDwItOeUwnb9uKAAAh+QQJAAANACwAAAAAEAAQAAAEO7DJSau92C6EVp4c90khMjZbd5KKYo4B0Z4KIZ9I4H7IQQSng8FwwAQAgJgBQMAAHo+kD3h5Rk/HpCUCACH5BAkAAA0ALAAAAAAQABAAAAQ8sMlJq7046827nwuCLJwoliYXjlIAAAGFKApCAc8DULQSTzgd4kCYEQgKigt2MBgOC5rtQnAeOAHilBIBADs=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/common/images/loading.gif\n// module id = wne9\n// module chunks = 6"],"sourceRoot":""}