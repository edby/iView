webpackJsonp([14],{EV1k:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("bmaO"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);var a=o("iYeZ"),l=o("vSla")(n.a,a.a,!1,null,null,null);e.default=l.exports},UZoK:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Wdu7"),n=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);var a=o("n29d");var l=function(t){o("q35q")},d=o("vSla")(n.a,a.a,!1,l,"data-v-1374a206",null);e.default=d.exports},Wdu7:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"logBin",data:function(){return{login:{},countdown:60,codeVal:"获取验证码",disabled:!1,timer:null}},mounted:function(){},methods:{isTels:function(){return this.login.tel&&""!=this.login.tel?!!/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(this.login.tel)||(layer.msg("电话不正确"),this.$refs.telEl.focus(),!1):(layer.msg("电话不能为空"),this.$refs.telEl.focus(),!1)},setCodeFn:function(){this.isTels()&&(this.setTime(),this.$axios.post("/user/login/send-sms",{tel:this.login.tel}).then(function(t){3e3==t.data.code&&layer.msg(t.data.message),2e3==t.data.code&&layer.msg("发送成功，请耐心等候！")}))},setTime:function(){var t=this;if(0===this.countdown)return this.disabled=!1,this.codeVal="免费获取验证码",this.countdown=60,void clearTimeout(this.timer);this.disabled=!0,this.codeVal="重新发送("+this.countdown+")",this.countdown--,this.timer=setTimeout(function(){t.setTime()},1e3)},codeFn:function(){return this.login.codes&&""!==this.login.codes?!!/^\d+$/.test(this.login.codes)||(layer.msg("验证码不正确"),this.$refs.codeEl.focus(),!1):(layer.msg("验证码不能为空"),this.$refs.codeEl.focus(),!1)},submitFn:function(){if(this.isTels()&&this.codeFn()){var t={tel:this.login.tel,codes:this.login.codes};this.$emit("submitFn",t)}}}}},bmaO:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(o("4YfN")),n=a(o("UZoK")),i=o("9rMa");function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"login",data:function(){return{str:""}},computed:(0,s.default)({},(0,i.mapGetters)(["isLogin","loginUrl"])),created:function(){this.str=decodeURIComponent(this.$route.query.callBack),this.isLoginFn(),this.isWeiXin()},mounted:function(){setTimeout(function(){},20)},methods:(0,s.default)({isLoginFn:function(){var t=this;this.$axios.get("/user/index/is-login").then(function(e){1e3==e.data.code?(console.log(e.data.message),t.$storage.set("isLogin",e.data.code),t.setLoginCode(e.data.code)):2e3==e.data.code&&(console.log(e.data.message),window.location.href=t.str,t.$storage.set("isLogin",e.data.code),t.setLoginCode(e.data.code))})},isWeiXin:function(){var t=this;this.$axios.get("/user/login/get-api?callBack="+encodeURIComponent(this.str)).then(function(e){2002==e.data.code&&(window.location.href=e.data.data.url,t.$storage.set("isLogin","2000"),t.setLoginCode("2000"))})},submitFn:function(t){this.loginSub(t)},loginSub:function(t){var e=this;this.$axios.post("/user/login/browser-login",{tel:t.tel,telcode:t.codes}).then(function(t){console.log(t.data),2e3==t.data.code?(window.location.href=e.str,e.$storage.set("isLogin",t.data.code),e.setLoginCode(t.data.code)):layer.msg(t.data.message)})}},(0,i.mapMutations)({setLoginCode:"SET_IS_LOGIN",setLoginUrl:"SET_LOGIN_URL"})),components:{LogBun:n.default}}},iYeZ:function(t,e,o){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login"},[e("log-bun",{on:{submitFn:this.submitFn}})],1)},staticRenderFns:[]};e.a=s},n29d:function(t,e,o){"use strict";var s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"logBin"},[o("form",{staticClass:"form_group"},[o("div",{staticClass:"input_group"},[o("label",{attrs:{for:"tel"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.tel,expression:"login.tel"}],ref:"telEl",staticClass:"btn_group",attrs:{type:"tel",name:"tel",id:"tel",placeholder:"请输入手机号"},domProps:{value:t.login.tel},on:{input:function(e){e.target.composing||t.$set(t.login,"tel",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"input_group"},[o("label",{attrs:{for:"codes"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.codes,expression:"login.codes"}],ref:"codeEl",staticClass:"btn_group",attrs:{type:"text",id:"codes",name:"codes",placeholder:"请输入短信验证码"},domProps:{value:t.login.codes},on:{input:function(e){e.target.composing||t.$set(t.login,"codes",e.target.value)}}}),t._v(" "),o("button",{staticClass:"code",attrs:{type:"button",disabled:t.disabled},domProps:{textContent:t._s(t.codeVal)},on:{click:t.setCodeFn}},[t._v("获取验证码\n        ")])])]),t._v(" "),o("div",{staticClass:"input_group"},[o("button",{staticClass:"btn_group",attrs:{type:"button"},on:{click:t.submitFn}},[t._v("确定")])])])])},staticRenderFns:[]};e.a=s},q35q:function(t,e){}});
//# sourceMappingURL=14.edd40ec7db26a32e1e14.js.map