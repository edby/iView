webpackJsonp([39],{"1qS7":function(a,t){},"3ytd":function(a,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=s("4i47"),d=s.n(e);for(var o in e)"default"!==o&&function(a){s.d(t,a,function(){return e[a]})}(o);var i=s("kobz");var r=function(a){s("1qS7")},n=s("vSla")(d.a,i.a,!1,r,"data-v-4f2d03a3",null);t.default=n.exports},"4i47":function(a,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"order",data:function(){return{title:"确认订单",address_id:"",address_user_id:"",address_realname:"",address_tel:"",address_status:"",address_pcaaddress:"",address_detail:"",address_created_at:"",address_update_at:"",address_message:"",address_view_id:0,goodsName:"",goodsSpec:"",goodsLogo:"",status:"",goodsSpecIds:"",goodsNum:"",relPrice:"",balance:"",points:"",use_points:"",totalExpress:"",totalPrice:"",totalPayPrice:"",userId:"",goodsId:"",acttype:"",userPoints:"",goodsBalance:"",switch1:!1,deduc:0,specId:{},num:"",goods_id:"",isCouponList:!1,couponList:[],userCId:0,couponTit:"请选择",colorText:"#495060",bcT:"",address_box:{},determines:[],coupon_cut:""}},created:function(){var a=this;this.specId=this.$route.query.specId,this.num=this.$route.query.num,this.goods_id=this.$route.query.goods_id,void 0==this.$route.query.address_id?(this.$route.query.address_id="",this.$axios.get("user/address/view?id="+this.$route.query.address_id).then(function(t){2e3==t.data.code&&(a.address_box=t.data.data,a.address_view_id=1,a.address_id=t.data.data.id,a.address_user_id=t.data.data.user_id,a.address_realname=t.data.data.realname,a.address_tel=t.data.data.tel,a.address_status=t.data.data.status,a.address_pcaaddress=t.data.data.pcaaddress,a.address_detail=t.data.data.detail,a.address_created_at=t.data.data.created_at,a.address_update_at=t.data.update_at),3e3==t.data.code&&(layer.msg(t.data.message),a.address_view_id=0,a.address_message=t.data.message)})):this.$axios.get("user/address/view?id="+this.$route.query.address_id).then(function(t){2e3==t.data.code&&(a.address_box=t.data.data,a.address_view_id=1,a.address_id=t.data.data.id,a.address_user_id=t.data.data.user_id,a.address_realname=t.data.data.realname,a.address_tel=t.data.data.tel,a.address_status=t.data.data.status,a.address_pcaaddress=t.data.data.pcaaddress,a.address_detail=t.data.data.detail,a.address_created_at=t.data.data.created_at,a.address_update_at=t.data.update_at),3e3==t.data.code&&(layer.msg(t.data.message),a.address_view_id=0,a.address_message=t.data.message)}),this.getConfirmOrder(),this.getCouponList()},computed:{sun:function(){return this.totalPrice-this.balance-this.coupon_cut}},filters:{numFilter:function(a){var t=Number(a).toFixed(2);return t.substring(0,t.length)}},methods:{SYCoupon:function(){0!==this.couponList.length?this.isCouponList=!0:layer.msg("您还没有优惠券")},changesRC:function(a){this.bcT=a},determine:function(){var a=this;this.isCouponList=!1,"-1"===this.bcT?(this.couponTit="请选择",this.colorText="#495060",this.userCId=0,this.determineFS()):(this.userCId=this.bcT.id,this.determineFS(),this.colorText="#e4b17a",this.$axios.get("/order/index/confirm-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&deduc="+this.deduc).then(function(t){a.coupon_cut=t.data.data.coupon_cut,2e3==t.data.code&&(1==a.bcT.coupon_type&&(a.couponTit="使用优惠券可减"+a.coupon_cut+"元"),2==a.bcT.coupon_type&&(a.couponTit="使用优惠券可减"+a.coupon_cut+"元"))}))},closeCoupon:function(){this.isCouponList=!1},getConfirmOrder:function(){var a=this;this.$axios.get("/order/index/confirm-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&deduc="+this.deduc).then(function(t){console.log(t),2e3==t.data.code&&(a.goodsName=t.data.data.goodsName,a.goodsSpec=t.data.data.goodsSpec,a.goodsLogo=t.data.data.goodsLogo,a.status=t.data.data.status,a.goodsSpecIds=t.data.data.goodsSpecIds,a.goodsNum=t.data.data.goodsNum,a.relPrice=t.data.data.relPrice,a.balance=t.data.data.balance,a.points=t.data.data.points,a.use_points=t.data.data.use_points,"0.00"==t.data.data.totalExpress?(t.data.data.totalExpress="包邮",a.totalExpress=t.data.data.totalExpress):a.totalExpress=t.data.data.totalExpress+"元",a.totalPrice=t.data.data.totalPrice,a.totalPayPrice=t.data.data.totalPayPrice,a.userId=t.data.data.userId,a.goodsId=t.data.data.goodsId,a.acttype=t.data.data.acttype,a.userPoints=t.data.data.userPoints,a.goodsBalance=t.data.data.goodsBalance),3e3==t.data.code&&(layer.msg(t.data.message),a.userCId=0,setTimeout(function(){a.$router.push({name:"orderpending"})},1e3))})},determineFS:function(){var a=this;this.$axios.get("/order/index/confirm-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&deduc="+this.deduc).then(function(t){console.log(t),2e3==t.data.code&&(a.determines=t.data.data,console.log(a.determines),a.goodsName=t.data.data.goodsName,a.goodsSpec=t.data.data.goodsSpec,a.goodsLogo=t.data.data.goodsLogo,a.status=t.data.data.status,a.goodsSpecIds=t.data.data.goodsSpecIds,a.goodsNum=t.data.data.goodsNum,a.relPrice=t.data.data.relPrice,a.balance=t.data.data.balance,a.points=t.data.data.points,a.use_points=t.data.data.use_points,"0.00"==t.data.data.totalExpress?(t.data.data.totalExpress="包邮",a.totalExpress=t.data.data.totalExpress):a.totalExpress=t.data.data.totalExpress+"元",a.totalPrice=t.data.data.totalPrice,a.totalPayPrice=t.data.data.totalPayPrice,a.userId=t.data.data.userId,a.goodsId=t.data.data.goodsId,a.acttype=t.data.data.acttype,a.userPoints=t.data.data.userPoints,a.goodsBalance=t.data.data.goodsBalance),3e3==t.data.code&&(layer.msg(t.data.message),a.couponTit="请选择",a.colorText="#495060",a.userCId=0)})},getCouponList:function(){var a=this;this.$axios.get("/order/index/get-coupon?id="+this.goods_id).then(function(t){console.log(t),2e3==t.data.code&&(a.couponList=t.data.data.items,console.log(t.data.data.items))})},change:function(a){1==a&&(this.deduc=1,this.determineFS()),0==a&&(this.deduc=0,this.determineFS())},pay:function(){var a=this;""!=this.address_realname?(1==this.deduc&&(this.sun>0?this.$axios.get("/order/index/create-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&addressId="+this.address_id+"&deduc="+this.deduc).then(function(t){console.log(t),2e3==t.data.code&&a.$router.push({name:"ispay",query:{id:t.data.data.id}}),3e3==t.data.code&&a.$router.push({name:"orderdelivergoods",query:{id:t.data.data.id}})}):this.$axios.get("/order/index/create-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&addressId="+this.address_id+"&deduc="+this.deduc).then(function(t){console.log(t),2e3==t.data.code&&a.$router.push({name:"orderdelivergoods",query:{id:t.data.data.id}}),3e3==t.data.code&&layer.msg(t.data.message)})),0==this.deduc&&this.$axios.get("/order/index/create-order?id="+this.goods_id+"&specId="+this.specId+"&num="+this.num+"&user_c_id="+this.userCId+"&addressId="+this.address_id+"&deduc="+this.deduc).then(function(t){console.log(t),2e3==t.data.code&&a.$router.push({name:"ispay",query:{id:t.data.data.id}}),3e3==t.data.code&&layer.msg(t.data.message)})):layer.msg("请先选择地址！")}}}},kobz:function(a,t,s){"use strict";var e={render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{directives:[{name:"title",rawName:"v-title",value:a.title,expression:"title"}],staticClass:"order"},[s("Row",{staticClass:"order_address"},[s("Icon",{attrs:{type:"ios-arrow-forward",size:"20"}}),a._v(" "),s("router-link",{attrs:{to:{name:"addressList",query:{specId:a.specId,num:a.num,num:a.num,goods_id:a.goods_id}}}},[s("Col",{directives:[{name:"show",rawName:"v-show",value:0==a.address_view_id,expression:"address_view_id==0"}],attrs:{span:"22"}},[s("Col",{attrs:{span:"4"}},[s("img",{staticStyle:{width:"40%",display:"block",margin:"0 auto","margin-top":"13%"},attrs:{src:"http://img.hena360.cn/gps.png",alt:""}})]),a._v(" "),s("Col",{attrs:{span:"20"}},[s("p",{staticStyle:{"line-height":"300%"}},[a._v(a._s(a.address_message))])])],1),a._v(" "),s("Col",{directives:[{name:"show",rawName:"v-show",value:1==a.address_view_id,expression:"address_view_id==1"}],attrs:{span:"22"}},[s("Col",{attrs:{span:"4"}},[s("img",{staticStyle:{width:"40%",display:"block",margin:"0 auto","margin-top":"10%"},attrs:{src:"http://img.hena360.cn/gps.png",alt:""}})]),a._v(" "),null!=a.address_box?s("Col",{attrs:{span:"20",id:a.address_id}},[s("h4",[a._v("收货人："+a._s(a.address_realname)+" "),s("span",{staticStyle:{float:"right"}},[a._v(a._s(a.address_tel))])]),a._v(" "),s("p",[a._v("收货地址："+a._s(a.address_pcaaddress)+" "+a._s(a.address_detail))])]):s("Col",{staticStyle:{"line-height":"36px"},attrs:{span:"20",id:a.address_id}},[a._v("\n          请添加收货人地址\n        ")])],1)],1)],1),a._v(" "),s("Row",{staticClass:"goods"},[s("Col",{attrs:{span:"6"}},[s("img",{attrs:{src:a.goodsLogo,alt:"",width:"100%"}})]),a._v(" "),s("Col",{attrs:{span:"18"}},[s("h4",[a._v(a._s(a.goodsName))]),a._v(" "),a.goodsSpec.length?s("p",[a._v("规格："+a._s(a.goodsSpec))]):a._e(),a._v(" "),s("div",[a._v("￥"+a._s(a.relPrice)+" "),0==a.points?s("span"):s("small",[a._v("+"+a._s(a.use_points)+"盟豆")]),a._v(" "),s("span",{attrs:{"data-num":a.goodsNum}},[a._v("X "+a._s(a.goodsNum))])])])],1),a._v(" "),s("Row",{staticClass:"order_total"},[s("Col",{attrs:{span:"24"}},[s("b",[a._v("快递费用")]),a._v(" "),s("span",{staticStyle:{color:"#666666"}},[a._v(a._s(a.totalExpress))])]),a._v(" "),s("Col",{attrs:{span:"24"}},[s("b",[a._v("订单合计")]),a._v(" "),s("span",{staticStyle:{"font-weight":"bold",color:"#b491dc"}},[a._v(a._s(a.totalPrice))])])],1),a._v(" "),s("Row",{staticClass:"order_points"},[0==a.points?s("div"):s("Col",{attrs:{span:"24"}},[s("b",[a._v("盟豆")]),a._v(" "),s("span",[a._v("使用"+a._s(a.points)+"盟豆兑换")])]),a._v(" "),s("div",{staticClass:"ivu-col ivu-col-span-24",on:{click:function(t){return t.stopPropagation(),a.SYCoupon(t)}}},[s("b",[a._v("优惠券")]),a._v(" "),s("span",{style:{color:a.colorText},domProps:{innerHTML:a._s(a.couponTit)}})]),a._v(" "),s("Col",{attrs:{span:"24"}},[s("b",[a._v("纳豆")]),a._v(" "),s("span",{staticClass:"balance"},[a._v("使用"+a._s(a.balance/10)+"个纳豆抵扣"+a._s(a.balance)+"元")]),a._v(" "),s("i-switch",{on:{"on-change":a.change},model:{value:a.switch1,callback:function(t){a.switch1=t},expression:"switch1"}})],1)],1),a._v(" "),s("Row",{staticClass:"order_pay"},[1==a.deduc?s("Col",{attrs:{span:"16"}},[s("b",[a._v("实付")]),a._v("  "),s("span",{staticStyle:{color:"#b491dc"}},[a._v(a._s(a.totalPayPrice))]),a._v(" "),1==a.deduc?s("span",{staticStyle:{color:"#f5b150","font-size":"12px"}},[a._v("   纳豆抵扣"+a._s(a._f("numFilter")(a.balance))+"元")]):a._e()]):a._e(),a._v(" "),0==a.deduc?s("Col",{attrs:{span:"16"}},[s("b",[a._v("实付")]),a._v(" "),s("span",{staticStyle:{color:"#b491dc"}},[a._v(a._s(a.totalPayPrice))]),a._v(" "),0==a.deduc?s("span",{staticStyle:{color:"#f5b150"}}):a._e()]):a._e(),a._v(" "),s("Col",{attrs:{span:"8"}},[s("button",{on:{click:function(t){a.pay()}}},[a._v("立即付款")])])],1),a._v(" "),a.isCouponList?s("div",{staticClass:"coupon_box",on:{click:a.closeCoupon}},[s("div",{staticClass:"tables"},[s("div",{staticClass:"cell",on:{click:function(a){a.stopPropagation()}}},[s("div",{staticClass:"title"},[a._v("可使用优惠券")]),a._v(" "),s("div",{staticClass:"noCoupon"},[s("div",{staticClass:"right_box"},[a._v("\n            不使用优惠券\n          ")]),a._v(" "),s("div",{staticClass:"NOcChanges"},[s("input",{staticClass:"changes_input",attrs:{name:"RCoupon1",type:"radio"},on:{change:function(t){t.stopPropagation(),a.changesRC("-1")}}}),a._v(" "),s("div",{staticClass:"changes_span"})])]),a._v(" "),s("div",{staticClass:"coupon_cent"},a._l(a.couponList,function(t,e){return s("div",{key:e,staticClass:"item_list"},[s("div",{staticClass:"item",class:{library:1==t.coupon_type,rebate:2==t.coupon_type}},[s("div",{staticClass:"item_title"},[s("div",{staticClass:"prc"},[s("h3",[a._v(a._s(t.disc_price))]),a._v(" "),1==t.coupon_type?s("span",[a._v("元")]):a._e(),a._v(" "),2==t.coupon_type?s("span",[a._v("折")]):a._e()]),a._v(" "),s("div",{staticClass:"illus"},[1==t.coupon_type?s("h4",[a._v("满"+a._s(t.meet_price)+"元减"+a._s(t.disc_price)+"元")]):a._e(),a._v(" "),2==t.coupon_type?s("h4",[a._v("满"+a._s(t.meet_price)+"元打"+a._s(t.disc_price)+"折")]):a._e(),a._v(" "),2==t.coupon_type?s("p",[a._v("最高可减"+a._s(t.high_price)+"元")]):a._e()])]),a._v(" "),s("div",{staticClass:"item_des"},[s("div",{staticClass:"item_des_list lt"},[a._v(a._s(t.title))]),a._v(" "),s("div",{staticClass:"item_des_list rt"},[a._v(a._s(t.start_time)+"-"+a._s(t.end_time))])])]),a._v(" "),s("div",{staticClass:"changes"},[s("input",{staticClass:"changes_input",attrs:{name:"RCoupon1",type:"radio"},on:{change:function(s){s.stopPropagation(),a.changesRC(t)}}}),a._v(" "),s("div",{staticClass:"changes_span"})])])})),a._v(" "),s("div",{staticClass:"coupon_btn"},[s("button",{staticClass:"con_btn",attrs:{type:"button"},on:{click:a.determine}},[a._v("确定")])])])])]):a._e()],1)},staticRenderFns:[]};t.a=e}});
//# sourceMappingURL=39.a380b3519e047768a703.js.map