webpackJsonp([9],{FyHL:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xrm2"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);var o=i("dG5y");var l=function(t){i("TW93")},d=i("vSla")(s.a,o.a,!1,l,"data-v-7bb013d5",null);e.default=d.exports},HI8c:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment",class:{fixedTY:t.isFixedTY},attrs:{id:"searchBar"}},[t.isFixedTY?i("div",{staticClass:"com_title fixedTY_title"},[i("h3",[t._v("评论详情 "),i("span",[t._v("("+t._s(t.num)+")")])])]):i("div",{staticClass:"com_title"},[i("h3",[t._v("评论详情 "),i("span",[t._v("("+t._s(t.num)+")")])])]),t._v(" "),t._t("default"),t._v(" "),i("div",{staticClass:"ccr"},[i("div",{staticClass:"assist",on:{click:function(e){return e.stopPropagation(),t.likenum(e)}}},[i("Icon",{attrs:{type:"md-thumbs-up",size:"24"}})],1),t._v(" "),i("div",{staticClass:"inputs"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ccrContent,expression:"ccrContent"}],staticClass:"ivu-input",attrs:{type:"text",maxlength:"225",placeholder:t.placeholderVal},domProps:{value:t.ccrContent},on:{input:function(e){e.target.composing||(t.ccrContent=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"btn_submits"},[i("Button",{attrs:{type:"text"},on:{click:t.OnSubmits}},[t._v("发送")])],1)])],2)},staticRenderFns:[]};e.a=a},TW93:function(t,e){},Wsxz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("wu57"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);var o=i("HI8c");var l=function(t){i("ctMW")},d=i("vSla")(s.a,o.a,!1,l,"data-v-4faa57a4",null);e.default=d.exports},Xrm2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(i("4YfN")),s=r(i("p8J/")),n=r(i("Wsxz")),o=r(i("IBZt")),l=r(i("6iV/")),d=i("fVKp"),c=i("9rMa");function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"dynamic",data:function(){return{title:"动态详情",uid:null,id:null,detailList:{},is_hot:null,count:"",commentList:[],isFixed:!1,comment_id:0,reply_target:"",allLoaded:!1,scrollMode:"auto",placeholderVal:"写下你的评论...",page:1,loading:!1,totalCount:0}},created:function(){this.uid=this.$route.query.uid,this.id=this.$route.query.id,(0,d.getLogin)(this),this.getDetailList(),this.getCommentList()},computed:(0,a.default)({},(0,c.mapGetters)(["isLogin","loginUrl"]),{isHot:function(){return 1===this.is_hot}}),methods:(0,a.default)({revert:function(t){this.isFixed=!0,this.comment_id=t.id,this.reply_target=t.nickname,this.placeholderVal="回复"+t.nickname},changeDetails:function(t){this.$router.push({path:"/CommodityDetails",query:{id:t.goods_id,mid:t.user_id}})},seedDispatch:function(t){var e=this;console.log(t),this.page=1,this.commentList=[];var i={};if(i=this.isFixed?{id:this.id,content:t,comment_id:this.comment_id,reply_target:this.reply_target}:{id:this.id,content:t,comment_id:0,reply_target:""},this.placeholderVal="写下你的评论...",this.isFixed=!1,""===t)return layer.msg("回复内容不能为空"),void this.getCommentList();this.$axios.post("/social/index/comment",l.default.stringify(i)).then(function(t){console.log(t),200==t.status&&2e3==t.data.code&&(layer.msg("评论成功OK!"),e.getCommentList())})},focusFn:function(t){var e=this;1===t.is_focus?layer.confirm("取消关注后，您将看不到对方发布的实时动态，确认取消？",{title:"取消确认"},function(){e.$axios.get("/social/index/focus-off?id="+t.user_id).then(function(t){200==t.status&&(console.log(t.data),2e3==t.data.code?(e.getDetailList(),console.log(t.data.message),layer.msg("取消关注成功")):(t.data.code,layer.msg(t.data.message)))})}):this.$axios.get("/social/index/focus?id="+t.user_id).then(function(t){200==t.status&&(2e3==t.data.code?(e.getDetailList(),console.log(t.data.message),layer.msg(t.data.message)):(t.data.code,layer.msg(t.data.message)))})},getDetailList:function(){var t=this;this.$axios.get("/social/index/detail?id="+this.id).then(function(e){if(200==e.status&&2e3==e.data.code){var i=[];if(e.data.data.img.length>9){for(var a=0;a<9;a++)i.push(e.data.data.img[a]);e.data.data.img=i}else t.detailList=e.data.data;var s=[];if(e.data.data.like_user_avatars.length>4){for(var n=0;n<4;n++)s.push(e.data.data.like_user_avatars[n]);e.data.data.like_user_avatars=s}else t.detailList=e.data.data;console.log(t.detailList),t.is_hot=t.detailList.like_info.is_hot,t.count=t.detailList.like_info.count}})},loadMore:function(){this.more()},getCommentList:function(){var t=this;this.$axios.get("/social/index/comment-list?id="+this.id+"&per-page=10&page="+this.page).then(function(e){if(2e3==e.data.code){var i=[];0==t.commentList.length?t.commentList=e.data.data.items:(i=e.data.data.items,t.commentList=t.commentList.concat(i)),console.log(e.data.data.items),t.totalCount=e.data.data._meta.totalCount,t.isHaveMore(e.data.data._meta.currentPage<e.data.data._meta.pageCount)}})},more:function(){this.page=parseInt(this.page)+1,this.getCommentList()},isHaveMore:function(t){this.loading=!t},likenum:function(){var t=this;this.$axios.get("/social/index/like?id="+this.id).then(function(e){200==e.status&&(2e3==e.data.code?(t.getDetailList(),layer.msg("点赞成功")):layer.msg(e.data.message))})}},(0,c.mapMutations)({setLoginCode:"SET_IS_LOGIN",setLoginUrl:"SET_LOGIN_URL"})),components:{Comment:n.default,VHeader:s.default,PanelList:o.default},beforeRouteEnter:function(t,e,i){i(function(t){console.log(t.isLogin),setTimeout(function(){1e3==t.isLogin&&t.$router.push({path:"/login?callBack="+encodeURIComponent(window.location.href)})},20)})}}},ctMW:function(t,e){},dG5y:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"title",rawName:"v-title",value:t.title,expression:"title"}],staticClass:"dynamic"},[i("div",{staticClass:"panelList"},[i("div",{staticClass:"bcg"},[i("ul",{staticClass:"mui-table-view"},[i("router-link",{staticClass:"mui-table-view-cell",attrs:{tag:"li",to:{name:"Personal",query:{id:t.detailList.user_id}}}},[i("img",{staticClass:"mui-media-object",attrs:{src:t.detailList.avatar}}),t._v(" "),i("div",{staticClass:"mui-media-body"},[i("b",[t._v(t._s(t.detailList.nickname))]),t._v(" "),i("p",{staticClass:"mui-ellipsis"},[t._v(t._s(t.detailList.created_at))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.detailList.user_id!=t.detailList.s_user_id||3==t.detailList.is_focus,expression:"detailList.user_id != detailList.s_user_id || detailList.is_focus == 3"}],staticClass:"right",on:{click:function(e){e.stopPropagation(),t.focusFn(t.detailList)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:0===t.detailList.is_focus,expression:"detailList.is_focus === 0"}],staticClass:"gz"},[t._v("+关注")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.detailList.is_focus,expression:"detailList.is_focus === 1"}],staticClass:"ygz"},[t._v("已关注")])])])],1),t._v(" "),i("div",{staticClass:"hot"},[1==t.detailList.status?i("span",[t._v("精选")]):t._e(),t._v(" "),t.isHot?i("span",[t._v("hot")]):t._e()]),t._v(" "),i("div",{staticClass:"panel_show"},[i("router-link",{staticClass:"panel_show_title",attrs:{to:{name:"dynamic",query:{uid:t.detailList.user_id,id:t.detailList.id}},tag:"div"},domProps:{innerHTML:t._s(t.detailList.content)}}),t._v(" "),i("div",{staticClass:"img_show"},[i("div",{staticClass:"row"},[i("ul",{staticClass:"img_item"},t._l(t.detailList.img,function(t,e){return i("li",{key:e},[i("img",{directives:[{name:"preview",rawName:"v-preview",value:t,expression:"v"}],staticClass:"mui-media-object",attrs:{src:t}})])}))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.detailList.goods_name,expression:"detailList.goods_name != null "}],staticClass:"panel_show_view-cell"},[i("ul",{staticClass:"mui-table-view"},[i("li",{staticClass:"mui-table-view-cell",on:{click:function(e){e.stopPropagation(),t.changeDetails(t.detailList)}}},[i("img",{staticClass:"mui-media-object",attrs:{src:t.detailList.goods_img}}),t._v(" "),i("div",{staticClass:"mui-media-body"},[t._v("\n                "+t._s(t.detailList.goods_name)+"\n              ")])])])])],1),t._v(" "),i("div",{staticClass:"fot_zp"},[i("ul",[i("li",[i("span",[t._v(t._s(t.count)+"人点赞")])]),t._v(" "),i("li",t._l(t.detailList.like_user_avatars,function(t,e){return i("img",{key:e,attrs:{src:t}})}))])])])]),t._v(" "),i("div",{staticClass:"hr"}),t._v(" "),i("comment",{attrs:{placeholderVal:t.placeholderVal,isFixed:t.isFixed,totalCount:t.totalCount,dataList:t.commentList},on:{dispatch:t.seedDispatch,revert:t.revert,likenum:t.likenum}},[0!=t.commentList.length?i("div",{staticClass:"content"},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"0"}},t._l(t.commentList,function(e,a){return i("div",{key:a,staticClass:"cont_item"},[i("div",{staticClass:"titles",attrs:{"data-id":"item.id"}},[i("Avatar",{attrs:{src:e.avatar}}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.nickname))])],1),t._v(" "),i("div",{staticClass:"des",on:{click:function(i){i.stopPropagation(),t.revert(e)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:0!=e.pid,expression:"item.pid != 0"}],staticStyle:{color:"#9f9f9f"}},[t._v(t._s(e.reply_target)+":")]),t._v(" "),i("span",{domProps:{innerHTML:t._s(e.content)}})]),t._v(" "),i("div",{staticClass:"times"},[t._v("\n            "+t._s(e.created_at)+"\n          ")])])}))]):t._e()])],1)},staticRenderFns:[]};e.a=a},wu57:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"comment",props:{dataList:{type:[Array,Object,String],default:[]},placeholderVal:{type:String,default:"写下你的评论..."},loading:{type:Boolean,default:!0},totalCount:{type:[Number,String],default:0}},data:function(){return{ccrContent:"",isFixedTY:!1}},computed:{num:function(){return this.totalCount}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=document.querySelector("#searchBar").offsetTop;this.isFixedTY=t>e},OnSubmits:function(){this.$emit("dispatch",this.ccrContent),this.ccrContent=""},revert:function(t){this.$emit("revert",t)},likenum:function(){this.$emit("likenum")}}}}});
//# sourceMappingURL=9.49413d2554eebe003840.js.map