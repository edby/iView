{"version":3,"sources":["webpack:///src/components/login/bindTel.vue","webpack:///./src/components/login/bindTel.vue?880b","webpack:///./src/components/login/bindTel.vue"],"names":["_qs2","__webpack_require__","name","data","login","countdown","codeVal","disabled","timer","mounted","methods","isTels","this","tel","test","layer","msg","$refs","telEl","focus","setCodeFn","setTime","$axios","post","then","res","code","message","_this","clearTimeout","setTimeout","codeFn","codes","codeEl","submitFn","_this2","obj","telcode","_qs3","default","stringify","$router","back","esExports","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","for","directives","rawName","value","expression","ref","type","id","placeholder","domProps","on","input","$event","target","composing","$set","textContent","_s","click","staticRenderFns","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_2_vue_loader_lib_template_compiler_index_id_data_v_05d08e62_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_template_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_bindTel_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_2_vue_loader_lib_selector_type_script_index_0_node_modules_iview_loader_1_2_1_iview_loader_index_js_ref_0_1_bindTel_vue___default","a"],"mappings":"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","file":"static/js/53.a642335f6758ee31ab72.js","sourcesContent":["<template>\r\n  <div class=\"bindTel\">\r\n    <h2>绑定手机号</h2>\r\n    <form class=\"form_group\">\r\n      <div class=\"input_group\">\r\n        <label for=\"tel\">\r\n          <input type=\"tel\"\r\n                 name=\"tel\" id=\"tel\"\r\n                 class=\"btn_group\"\r\n                 ref=\"telEl\"\r\n                 v-model=\"login.tel\"\r\n                 placeholder=\"请输入手机号\">\r\n        </label>\r\n      </div>\r\n      <div class=\"input_group\">\r\n        <label for=\"codes\">\r\n          <input type=\"text\"\r\n                 id=\"codes\" name=\"codes\"\r\n                 class=\"btn_group\"\r\n                 ref=\"codeEl\"\r\n                 v-model=\"login.codes\"\r\n                 placeholder=\"请输入短信验证码\">\r\n          <button type=\"button\" class=\"code\"\r\n                  :disabled=\"disabled\"\r\n                  @click=\"setCodeFn\"\r\n                  v-text=\"codeVal\">获取验证码\r\n          </button>\r\n        </label>\r\n      </div>\r\n      <div class=\"input_group\">\r\n        <button type=\"button\" class=\"btn_group\" @click=\"submitFn\">绑定手机号</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import _qs from 'qs'\r\n  export default {\r\n    name: \"bindTel\",\r\n    data() {\r\n      return {\r\n        login: {},\r\n        countdown: 60,\r\n        codeVal: '获取验证码',\r\n        disabled: false,\r\n        timer: null\r\n      }\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n      isTels() {\r\n        let reg = /^1[3|4|5|6|7|8|9][0-9]\\d{4,8}$/;\r\n        if (!this.login.tel || this.login.tel == '') {\r\n          layer.msg('电话不能为空');\r\n          this.$refs.telEl.focus();\r\n          return false\r\n        }\r\n        if (!reg.test(this.login.tel)) {\r\n          layer.msg('电话不正确');\r\n          this.$refs.telEl.focus();\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      setCodeFn() {\r\n        let flag = this.isTels();\r\n        if (flag) {\r\n          this.setTime();\r\n          this.$axios.post('/user/login/send-sms', {\r\n            tel: this.login.tel\r\n          })\r\n            .then(res => {\r\n              if (res.data.code == 3000) {\r\n                layer.msg(res.data.message);\r\n              }\r\n              if (res.data.code == 2000) {\r\n                layer.msg('发送成功，请耐心等候！');\r\n              }\r\n            });\r\n        }\r\n      },\r\n      setTime() {\r\n        if (this.countdown === 0) {\r\n          this.disabled = false;\r\n          this.codeVal = '免费获取验证码';\r\n          this.countdown = 60;\r\n          clearTimeout(this.timer);\r\n          return;\r\n        } else {\r\n          this.disabled = true;\r\n          this.codeVal = `重新发送(${this.countdown})`;\r\n          this.countdown--;\r\n        }\r\n        this.timer = setTimeout(() => {\r\n          this.setTime();\r\n        }, 1000);\r\n      },\r\n      codeFn() {\r\n        if (!this.login.codes || this.login.codes === '') {\r\n          layer.msg('验证码不能为空');\r\n          this.$refs.codeEl.focus();\r\n          return false\r\n        }\r\n        if (!/^\\d+$/.test(this.login.codes) ) {\r\n          layer.msg('验证码不正确');\r\n          this.$refs.codeEl.focus();\r\n          return false\r\n        }\r\n        return true\r\n      },\r\n      submitFn() {\r\n        let flag = this.isTels();\r\n        if (flag) {\r\n          let flagCode = this.codeFn();\r\n          if (flagCode) {\r\n            let obj = {\r\n              tel: this.login.tel,\r\n              telcode: this.login.codes\r\n            };\r\n            this.$axios.post('/user/login/bind-phone', _qs.stringify(obj))\r\n              .then(res => {\r\n                if (res.data.code == 3000) {\r\n                  layer.msg(res.data.message)\r\n                  return\r\n                }\r\n                if (res.data.code == 2000) {\r\n                  layer.msg(res.data.message)\r\n                  setTimeout(() =>{\r\n                    this.$router.back()\r\n                  },2000)\r\n                }\r\n              })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n</script>\r\n<style scoped lang=\"stylus\" type=\"text/stylus\" rel=\"stylesheet/stylus\">\r\n  .bindTel\r\n    -webkit-box-sizing: border-box\r\n    -moz-box-sizing: border-box\r\n    box-sizing: border-box\r\n    width 100%\r\n    padding 15px\r\n    h2\r\n      font-size 20px\r\n      color #333333\r\n      margin: 10px auto;\r\n      text-align left\r\n      line-height:300%\r\n    .form_group\r\n      width: 100%;\r\n      .input_group\r\n        display: block;\r\n        padding-bottom: 15px;\r\n      label\r\n        display: block;\r\n        font-weight: normal;\r\n        font-size 14px\r\n        position: relative\r\n        overflow: hidden;\r\n        input\r\n          width: 100%;\r\n          padding: 0 5px;\r\n          background-color white\r\n          border-bottom: 1px solid #eeeeee;\r\n        .code\r\n          position: absolute\r\n          height: 40px\r\n          width: 100px;\r\n          right: 0\r\n          top: 0\r\n          font-size 12px\r\n          background-color white\r\n          outline none\r\n          z-index: 0;\r\n          border none\r\n          border-radius 4px\r\n          border-bottom-left-radius 0\r\n          border-top-left-radius 0\r\n          border-bottom 1px solid #eeeeee\r\n      button\r\n        width: 100%;\r\n        text-align center\r\n        background-color: #FFE86A\r\n\r\n  .btn_group\r\n    border none\r\n    outline none\r\n    height: 40px\r\n    font-size 14px\r\n    color black\r\n    padding: 0;\r\n    margin: 0;\r\n    border-radius 4px\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/bindTel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bindTel\"},[_c('h2',[_vm._v(\"绑定手机号\")]),_vm._v(\" \"),_c('form',{staticClass:\"form_group\"},[_c('div',{staticClass:\"input_group\"},[_c('label',{attrs:{\"for\":\"tel\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.tel),expression:\"login.tel\"}],ref:\"telEl\",staticClass:\"btn_group\",attrs:{\"type\":\"tel\",\"name\":\"tel\",\"id\":\"tel\",\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.login.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"tel\", $event.target.value)}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"input_group\"},[_c('label',{attrs:{\"for\":\"codes\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.codes),expression:\"login.codes\"}],ref:\"codeEl\",staticClass:\"btn_group\",attrs:{\"type\":\"text\",\"id\":\"codes\",\"name\":\"codes\",\"placeholder\":\"请输入短信验证码\"},domProps:{\"value\":(_vm.login.codes)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.login, \"codes\", $event.target.value)}}}),_vm._v(\" \"),_c('button',{staticClass:\"code\",attrs:{\"type\":\"button\",\"disabled\":_vm.disabled},domProps:{\"textContent\":_vm._s(_vm.codeVal)},on:{\"click\":_vm.setCodeFn}},[_vm._v(\"获取验证码\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"input_group\"},[_c('button',{staticClass:\"btn_group\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.submitFn}},[_vm._v(\"绑定手机号\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-05d08e62\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./node_modules/_iview-loader@1.2.1@iview-loader??ref--0-1!./src/components/login/bindTel.vue\n// module id = Tqmd\n// module chunks = 53","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-05d08e62\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./bindTel.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./bindTel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./bindTel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05d08e62\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!../../../node_modules/_iview-loader@1.2.1@iview-loader/index.js??ref--0-1!./bindTel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-05d08e62\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/bindTel.vue\n// module id = WGwR\n// module chunks = 53"],"sourceRoot":""}